{
  "version": 3,
  "sources": ["../../@t3-oss/env-core/dist/src-Bb3GbGAa.js"],
  "sourcesContent": ["//#region src/standard.ts\nfunction ensureSynchronous(value, message) {\n\tif (value instanceof Promise) throw new Error(message);\n}\nfunction parseWithDictionary(dictionary, value) {\n\tconst result = {};\n\tconst issues = [];\n\tfor (const key in dictionary) {\n\t\tconst propResult = dictionary[key][\"~standard\"].validate(value[key]);\n\t\tensureSynchronous(propResult, `Validation must be synchronous, but ${key} returned a Promise.`);\n\t\tif (propResult.issues) {\n\t\t\tissues.push(...propResult.issues.map((issue) => ({\n\t\t\t\t...issue,\n\t\t\t\tmessage: issue.message,\n\t\t\t\tpath: [key, ...issue.path ?? []]\n\t\t\t})));\n\t\t\tcontinue;\n\t\t}\n\t\tresult[key] = propResult.value;\n\t}\n\tif (issues.length) return { issues };\n\treturn { value: result };\n}\n\n//#endregion\n//#region src/index.ts\n/**\n* Create a new environment variable schema.\n*/\nfunction createEnv(opts) {\n\tconst runtimeEnv = opts.runtimeEnvStrict ?? opts.runtimeEnv ?? process.env;\n\tconst emptyStringAsUndefined = opts.emptyStringAsUndefined ?? false;\n\tif (emptyStringAsUndefined) {\n\t\tfor (const [key, value] of Object.entries(runtimeEnv)) if (value === \"\") delete runtimeEnv[key];\n\t}\n\tconst skip = !!opts.skipValidation;\n\tif (skip) return runtimeEnv;\n\tconst _client = typeof opts.client === \"object\" ? opts.client : {};\n\tconst _server = typeof opts.server === \"object\" ? opts.server : {};\n\tconst _shared = typeof opts.shared === \"object\" ? opts.shared : {};\n\tconst isServer = opts.isServer ?? (typeof window === \"undefined\" || \"Deno\" in window);\n\tconst finalSchemaShape = isServer ? {\n\t\t..._server,\n\t\t..._shared,\n\t\t..._client\n\t} : {\n\t\t..._client,\n\t\t..._shared\n\t};\n\tconst parsed = opts.createFinalSchema?.(finalSchemaShape, isServer)[\"~standard\"].validate(runtimeEnv) ?? parseWithDictionary(finalSchemaShape, runtimeEnv);\n\tensureSynchronous(parsed, \"Validation must be synchronous\");\n\tconst onValidationError = opts.onValidationError ?? ((issues) => {\n\t\tconsole.error(\"❌ Invalid environment variables:\", issues);\n\t\tthrow new Error(\"Invalid environment variables\");\n\t});\n\tconst onInvalidAccess = opts.onInvalidAccess ?? (() => {\n\t\tthrow new Error(\"❌ Attempted to access a server-side environment variable on the client\");\n\t});\n\tif (parsed.issues) return onValidationError(parsed.issues);\n\tconst isServerAccess = (prop) => {\n\t\tif (!opts.clientPrefix) return true;\n\t\treturn !prop.startsWith(opts.clientPrefix) && !(prop in _shared);\n\t};\n\tconst isValidServerAccess = (prop) => {\n\t\treturn isServer || !isServerAccess(prop);\n\t};\n\tconst ignoreProp = (prop) => {\n\t\treturn prop === \"__esModule\" || prop === \"$$typeof\";\n\t};\n\tconst extendedObj = (opts.extends ?? []).reduce((acc, curr) => {\n\t\treturn Object.assign(acc, curr);\n\t}, {});\n\tconst fullObj = Object.assign(extendedObj, parsed.value);\n\tconst env = new Proxy(fullObj, { get(target, prop) {\n\t\tif (typeof prop !== \"string\") return void 0;\n\t\tif (ignoreProp(prop)) return void 0;\n\t\tif (!isValidServerAccess(prop)) return onInvalidAccess(prop);\n\t\treturn Reflect.get(target, prop);\n\t} });\n\treturn env;\n}\n\n//#endregion\nexport { createEnv };"],
  "mappings": "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",
  "names": []
}
